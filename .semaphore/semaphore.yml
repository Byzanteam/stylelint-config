version: v1.0

name: stylelint-config

agent:
  machine:
    type: e1-standard-2
  containers:
  - name: main
    image: semaphoreci/node:10.16

blocks:
  - name: Publish
    skip:
      when: tag !~ '.*'
    task:
      secrets:
        - name: fe-library
      jobs:
        - name: Publish
          commands:
            - checkout
            - echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > ~/.npmrc
            - npm publish --access=public
