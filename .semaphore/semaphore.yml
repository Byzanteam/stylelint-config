version: v1.0

name: stylelint-config

agent:
  machine:
    type: e1-standard-2

blocks:
  - name: Publish
    skip:
      when: branch != 'master'
    task:
      secrets:
        - name: fe-library
      prologue:
        commands:
          - checkout
          - nvm use lts/*
      jobs:
        - name: Publish stylelint-config
          commands:
            - echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > ~/.npmrc
            - npm publish --access=public
